(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[5],{103:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),c=Object(r.b)("filter/value")},120:function(e,t,n){},121:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);n(120),n(121);var r=n(0),c=n.n(r),a=n(10),i=n(16),s=n(202),o=n(30),u=n(1),l=function(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n;return Object(i.e)(o.a)?t:Object(u.jsx)(a.a,{to:r})},j=function(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,s=void 0===c?"/":c;return Object(i.e)(o.a)&&r?Object(u.jsx)(a.a,{to:s}):t},b=n(14),d=n(205),h=n(204),O=n(206),f=n(203),p=n(109),x=n.n(p),v=n(198),m=n(162),g=n(37),y=n.n(g),k=n(40);function C(){return Object(u.jsx)("nav",{children:Object(u.jsxs)("div",{className:y.a.nav,children:[Object(u.jsx)(k.b,{to:"/login",className:y.a.text,children:"Log in"}),Object(u.jsx)(k.b,{to:"/register",className:y.a.text,children:"Sign up"})]})})}var w=n(106),T=n.n(w),N=n(207);function S(){var e=Object(i.e)(o.a),t=r.useState(null),n=Object(b.a)(t,2),c=n[0],a=n[1];console.log(c);return Object(u.jsx)("nav",{children:Object(u.jsxs)("ul",{className:y.a.container,children:[Object(u.jsx)("li",{children:Object(u.jsx)(k.b,{to:"/",className:y.a.text,children:Object(u.jsx)(f.a,{size:"large",edge:"start","aria-label":"home",onClick:function(e){a(e.currentTarget)},sx:{mr:1},children:Object(u.jsx)(T.a,{})})})}),e&&Object(u.jsx)("li",{children:Object(u.jsx)(k.b,{to:"/contacts",className:y.a.text,children:Object(u.jsx)(N.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Contacts"})})})]})})}var z=n(200),A=n(108),_=n.n(A),E=n(201),P=n(32),R={avatar:{marginRight:10,color:"black",backgroundColor:"teal"},name:{}};function W(){var e=Object(i.d)(),t=Object(i.e)(o.c);return Object(u.jsxs)("div",{className:y.a.container,children:[Object(u.jsx)(E.a,{alt:"name",src:"/images/avatar/1.jpg",style:R.avatar,children:t.name}),Object(u.jsxs)(N.a,{style:R.name,variant:"h6",component:"div",sx:{flexGrow:1},children:["Welcome, ",t.name]}),Object(u.jsxs)(z.a,{type:"button",variant:"none",onClick:function(){e(Object(P.c)())},size:"small",color:"grey",children:[" ",Object(u.jsx)(_.a,{})]})]})}var q={container:{color:"#212529",justifyContent:"space-around",backgroundColor:"#1c5d67"}};function G(){var e=Object(i.e)(o.a),t=r.useState(null),n=Object(b.a)(t,2),c=n[0],a=n[1],s=function(){a(null)};return Object(u.jsx)(h.a,{sx:{flexGrow:2},children:Object(u.jsx)(d.a,{position:"static",children:Object(u.jsxs)(O.a,{style:q.container,children:[Object(u.jsx)(S,{}),e?Object(u.jsx)(v.a,{onClick:s,children:Object(u.jsx)(W,{})}):Object(u.jsxs)("div",{children:[Object(u.jsx)(f.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){a(e.currentTarget)},color:"inherit",children:Object(u.jsx)(x.a,{})}),Object(u.jsx)(m.a,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(c),onClose:s,children:Object(u.jsx)(v.a,{to:"/login",onClick:s,children:Object(u.jsx)(C,{})})})]})]})})})}var J=n(47),L=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,225))})),M=Object(r.lazy)((function(){return Promise.all([n.e(8),n.e(0)]).then(n.bind(null,231))})),V=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,227))})),Q=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,228))})),B=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,229))}));var D,F=function(){var e=Object(i.d)(),t=Object(i.e)(o.a),n=Object(i.e)(o.d),c=Object(J.e)().data;return Object(r.useEffect)((function(){t||c&&e(Object(P.a)(c))}),[c,e,t]),!n&&Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(G,{}),Object(u.jsx)("main",{children:Object(u.jsx)("div",{className:"container",children:Object(u.jsx)(r.Suspense,{fallback:Object(u.jsx)(s.a,{}),children:Object(u.jsxs)(a.d,{children:[Object(u.jsx)(a.b,{path:"/",element:Object(u.jsx)(j,{restricted:!0,redirectTo:"/contacts",children:Object(u.jsx)(L,{})})}),Object(u.jsx)(a.b,{path:"/contacts",element:Object(u.jsx)(l,{restricted:!0,redirectTo:"/login",children:Object(u.jsx)(M,{})})}),Object(u.jsx)(a.b,{path:"/register",element:Object(u.jsx)(j,{restricted:!0,children:Object(u.jsx)(Q,{})})}),Object(u.jsx)(a.b,{path:"/login",element:Object(u.jsx)(j,{restricted:!0,children:Object(u.jsx)(V,{})})}),Object(u.jsx)(a.b,{element:Object(u.jsx)(B,{})})]})})})})]})},I=n(35),U=n.n(I),H=n(111),K=n(5),X=n(19),Y=n(44),Z=n(112),$=n.n(Z),ee=n(4),te=n(103),ne=Object(ee.d)("",Object(K.a)({},te.a,(function(e,t){return t.payload}))),re={key:"auth",storage:$.a,whitelist:["token"]},ce=Object(Y.g)(re,J.b),ae=Object(X.a)(Object(ee.f)({serializableCheck:{ignoredActions:[Y.a,Y.f,Y.b,Y.c,Y.d,Y.e]}}).concat(J.a.middleware)),ie=Object(ee.a)({reducer:(D={auth:ce},Object(K.a)(D,J.a.reducerPath,J.a.reducer),Object(K.a)(D,"filter",ne),D),middleware:ae,devTools:!1}),se={store:ie,persistor:Object(Y.h)(ie)};U.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(i.a,{store:se.store,children:Object(u.jsx)(H.a,{loading:"Loading...",persistor:se.persistor,children:Object(u.jsx)(k.a,{children:Object(u.jsx)(F,{})})})})}),document.getElementById("root"))},30:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i}));var r=function(e){return e.auth.user},c=function(e){return e.filter},a=function(e){return e.auth.isAuth},i=function(e){return e.auth.isRefresh}},32:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return d}));var r=n(43),c=n.n(r),a=n(63),i=n(107),s=n.n(i),o=n(4),u="https://connections-api.herokuapp.com";s.a.defaults.baseURL=u;var l=Object(o.c)("users/signup",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,fetch(u+"/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=e.sent,e.next=7,a.json();case 7:return i=e.sent,e.abrupt("return",i);case 11:e.prev=11,e.t0=e.catch(1),r({error:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),j=Object(o.c)("users/login",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,fetch(u+"/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=e.sent,e.next=7,a.json();case 7:return i=e.sent,e.abrupt("return",i);case 11:e.prev=11,e.t0=e.catch(1),r({error:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),b=Object(o.c)("users/current",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,i,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.rejectWithValue,a=n.getState,i=a(),i.auth.token){e.next=5;break}throw new Error(200);case 5:return e.prev=5,e.next=8,fetch(u+"/users/current",{method:"GET",headers:{Authorization:i.auth.token}});case 8:return s=e.sent,e.next=11,s.json();case 11:return o=e.sent,e.abrupt("return",o);case 15:e.prev=15,e.t0=e.catch(5),r({error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,n){return e.apply(this,arguments)}}()),d=Object(o.c)("users/logout",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.rejectWithValue,a=n.getState,(i=a()).auth.token){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,fetch(u+"/users/logout",{method:"POST",headers:{Authorization:i.auth.token}});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),r({error:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,n){return e.apply(this,arguments)}}())},37:function(e,t,n){e.exports={container:"Navigation_container___wsPy",text:"Navigation_text__2Q3os",nav:"Navigation_nav__INfuO"}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return O})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p}));var r,c=n(19),a=n(5),i=n(24),s=n(4),o=n(32),u=n(110),l=n(25),j=Object(s.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,error:null,isAuth:!1,isRefresh:!1},extraReducers:(r={},Object(a.a)(r,o.d.fulfilled,(function(e,t){return Object(i.a)(Object(i.a)({},e),{},{user:t.payload.user,token:t.payload.token,isAuth:!0})})),Object(a.a)(r,o.b.fulfilled,(function(e,t){return Object(i.a)(Object(i.a)({},e),{},{user:t.payload.user,token:t.payload.token,isAuth:!0})})),Object(a.a)(r,o.c.fulfilled,(function(e,t){return Object(i.a)(Object(i.a)({},e),{},{user:{name:null,email:null},token:null,isAuth:!1})})),Object(a.a)(r,o.a.pending,(function(e,t){return Object(i.a)(Object(i.a)({},e),{},{isRefresh:!0})})),Object(a.a)(r,o.a.fulfilled,(function(e,t,n){return Object(i.a)(Object(i.a)({},e),{},{user:t.payload,isAuth:!0,isRefresh:!1})})),Object(a.a)(r,o.a.rejected,(function(e,t){return Object(i.a)(Object(i.a)({},e),{},{error:t.payload,isRefresh:!1})})),r)});t.b=j.reducer;var b="https://".concat("61968c60af46280017e7e165",".mockapi.io/api/v1"),d="/contacts",h=Object(u.a)({reducerPath:"Contacts",baseQuery:Object(l.d)({baseUrl:b}),tagTypes:["Contact"],endpoints:function(e){return{fetchContacts:e.query({query:function(){return d},providesTags:function(e,t,n){return Object(c.a)(e.map((function(e){return{type:"Contact",id:e.id}})))}}),addNewContact:e.mutation({query:function(e){return{method:"POST",url:d,body:e}},invalidatesTags:["Contact"]}),deleteContact:e.mutation({query:function(e){return{method:"DELETE",url:"".concat(d,"/").concat(e)}},invalidatesTags:function(e,t,n){return[{type:"Contact",id:n}]}})}}}),O=(Object(s.e)({name:"filter",initialState:"",reducer:{"filter/value":function(e,t){return t.payload}}}).actions.setFilter,h.useFetchContactsQuery),f=h.useAddNewContactMutation,p=h.useDeleteContactMutation}},[[155,6,7]]]);
//# sourceMappingURL=main.b58e8038.chunk.js.map